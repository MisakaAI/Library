# Zip

## 安装

```bash
apt install zip unzip
```

## 压缩

```bash
zip -r myfile.zip ./*

# -r 递归压缩目录，将指定目录下的所有文件以及子目录全部压缩。
# -m 将文件压缩之后，删除原始文件。
# -v 显示详细的压缩过程信息。
# -q 在压缩的时候不显示命令的执行过程。
# -压缩级别 压缩级别是从 1~9 的数字，-1 代表压缩速度更快，-9 代表压缩效果更好。
# -f 更新现有的文件。
# -u 与 -f 参数类似，但是除了更新现有的文件外，也会将压缩文件中的其他文件解压缩到目录中。
# -F 尝试修复已损坏的压缩文件。
# -n<字尾字符串> 不压缩具有特定字尾字符串的文件。
# -T 检查压缩文件内的每个文件是否正确无误。
```

## 解压

```bash
unzip myfile.zip

# -c 将解压缩的结果显示到屏幕上，并对字符做适当的转换。
# -p 与-c参数类似，会将解压缩的结果显示到屏幕上，但不会执行任何的转换。
# -f 更新现有的文件。
# -u 与-f参数类似，但是除了更新现有的文件外，也会将压缩文件中的其他文件解压缩到目录中。
# -l 显示压缩文件内所包含的文件。
# -t 检查压缩文件是否正确。
# -v 执行时显示详细的信息。
# -n 解压缩时不要覆盖原有的文件。
# -o 不必先询问用户，unzip执行后覆盖原有文件。
# -P<密码> 使用zip的密码选项。
# -q 执行时不显示任何信息。
# -s 将文件名中的空白字符转换为底线字符。
# -d<目录> 指定文件解压缩后所要存储的目录。
```

## 列出压缩文件信息

```bash
zipinfo myfile.zip

# -1 只列出文件名称。
# -h 只列出压缩文件的文件名称。
# -v 详细显示压缩文件内每一个文件的信息。
# -z 如果压缩文件内含有注释，就将注释显示出来。
```

## 暴力爆破

```bash
# 安装
apt install fcrackzip

# 使用
fcrackzip -D -p passwd passwd.zip

-c 指定字符集，字符集 格式只能为 -c 'aA1!:'

# a 表示小写字母`a-z`
# A 表示大写字母`A-Z`
# 1 表示阿拉伯数字`0-9`
# ! 感叹号表示特殊字符`!:$%&/()=?{[]}+*~#`
# : 表示包含冒号之后的字符（不能为二进制的空字符），例如  a1:$%  表示 字符集包含小写字母、数字、$字符和%百分号

# -b 表示使用暴利破解的方式
# -l 1-10 表示需要破解的密码长度为1到10位
# -u 表示只显示破解出来的密码，其他错误的密码不显示出

# -D 表示要使用字典破解
# -p 表示要使用哪个字典破解
```

### 生成字典

Kali linux自带了一些字典在/usr/share/wordlists/下

```bash
# 安装

apt install crunch

# 生成

# 生成最小1位，最大8位，由26个小写字母为元素的所有组合 ，将生成的内容导出为1.txt
crunch 1 8 >> 1.txt

# 生成 最小为1,最大为4.由abcd为元素的所有组合 ，并把结果导出为2.txt
crunch 1 4 abcd >> 2.txt

# 生成 最小为9,最大为9.由数字0-9为元素的所有组合 ，并把结果导出为password.txt
crunch 9 9 0123456789 > password.txt

# 制作139开头的手机密码字典
crunch 11 11  +0123456789 -t 139%%%%%%%% -o num13.dic

# -b 按大小分割字典文件，比如后跟20mib
# -c 密码个数（行数），比如8000
# -d 限制出现相同元素的个数（至少出现元素个数），-d 3就不会出现aabbbb之类的情况
# -e 定义停止生成密码 ，比如-e abcd：到abcd停止生成密码
# -f 调用密码库文件，比如-f charset.lst mixalpha-numeric 意为调用密码库 charset.lst中的 mixalpha-numeric项目字符
# -i 改变输出格式
# -l 与-t搭配使用
# -m 与-p搭配使用
# -o 保存为
# -p 定义密码元素
# -q 读取字典
# -r 定义从某一个地方重新开始
# -s 第一个密码，从xxx开始
# -t 定义输出格式
# -z 打包压缩，格式支持 gzip, bzip2, lzma, 7z

# '%' 插入数字
# '@' 插入小写字母
# ',' 插入大写字母
# '^' 插入符号
```

## 参考文献

[菜鸟教程](https://www.runoob.com/linux/linux-comm-zip.html)
[菜鸟教程](https://www.runoob.com/linux/linux-comm-unzip.html)
[菜鸟教程](https://www.runoob.com/linux/linux-comm-zipinfo.html)
